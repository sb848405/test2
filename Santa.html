<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>A Magical Birthday Surprise!</title>
    
    <!-- Tailwind CSS for styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts for a festive feel -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&family=Mountains+of+Christmas:wght@700&family=Playfair+Display:ital,wght@1,500&display=swap" rel="stylesheet">
    
    <style>
        /* Custom styles to apply our festive font */
        body {
            font-family: 'Inter', sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            background-image: url('X-Mas.png'); 
            background-size: cover;
            background-position: center;
            color: #333;
            transition: background-image 0.5s ease, background-color 0.5s ease;
        }
        .font-festive {
            font-family: 'Mountains of Christmas', cursive;
        }
        .font-poem {
            font-family: 'Playfair Display', serif;
        }

        /* --- Modal Styles --- */
        .modal-container {
            transition: opacity 0.5s ease-in-out, transform 0.5s ease-in-out;
        }
        .modal-container.hidden {
            opacity: 0;
            transform: scale(0.95);
            pointer-events: none;
        }
        
        /* --- Fireworks Canvas --- */
        #fireworks-canvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 20; /* Below content but above background */
            pointer-events: none; /* Allows clicks to go through */
        }

        /* --- Black Background Theme for Fireworks --- */
        body.black-bg {
            background-image: none;
            background-color: #000000;
        }
        .black-bg #scene1, .black-bg #scene2, .black-bg #scene2_5, .black-bg #scene2_75 {
             background-color: rgba(31, 41, 55, 0.8); /* Tailwind gray-800 with opacity */
        }
        .black-bg .text-gray-800 { color: #e5e7eb; } /* gray-200 */
        .black-bg .text-gray-700 { color: #d1d5db; } /* gray-300 */
        .black-bg #scene3 p { color: #f9fafb; text-shadow: 0 0 5px #000; }
        .black-bg #snow-container { display: none; } /* Hide snow during fireworks */
        

        /* --- Keyframe animation for the glowing effect --- */
        @keyframes subtle-glow {
          0%, 100% {
            box-shadow: 0 0 15px rgba(255, 255, 255, 0.5), 0 0 25px rgba(236, 72, 153, 0.4); /* white and pink glow */
          }
          50% {
            box-shadow: 0 0 25px rgba(255, 255, 255, 0.7), 0 0 40px rgba(236, 72, 153, 0.6);
          }
        }

        /* Apply the glow animation to the final photo on the black background */
        .black-bg #finalPhoto {
            animation: subtle-glow 3s infinite ease-in-out;
        }

        /* --- Sparkles within cards --- */
        .sparkle {
            position: absolute;
            background-color: #ffd700; /* Gold color */
            border-radius: 50%;
            animation: sparkle-fall 5s linear infinite;
            top: -5%;
            opacity: 0;
            box-shadow: 0 0 5px #ffd700, 0 0 10px #ffd700;
        }

        @keyframes sparkle-fall {
            0% {
                transform: translateY(0) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(105%) rotate(360deg);
                opacity: 0;
            }
        }
        
        /* --- Snowfall Effect --- */
        .snowflake {
            position: absolute;
            color: #fff;
            font-size: 1.5rem;
            animation: fall linear infinite;
            top: -10vh;
            text-shadow: 0 0 5px #000;
            pointer-events: none;
        }

        @keyframes fall {
            to {
                transform: translateY(105vh);
            }
        }

        /* --- Candle Flame Animation --- */
        .flame {
            animation: flicker 1.5s infinite alternate;
            transform-origin: bottom;
            filter: drop-shadow(0 0 10px #fef08a); /* a nice yellow glow */
        }

        @keyframes flicker {
            0%, 100% {
                transform: scaleY(1) scaleX(1) skewX(0deg);
                opacity: 1;
            }
            50% {
                transform: scaleY(0.95) scaleX(1.05) skewX(5deg);
                opacity: 0.9;
            }
             75% {
                transform: scaleY(1.05) scaleX(0.95) skewX(-5deg);
                opacity: 0.95;
            }
        }

    </style>
</head>
<body class="overflow-hidden">

    <audio id="background-music" loop src="432hz.mp3"></audio>

    <!-- Snowfall Background -->
    <div id="snow-container" class="fixed top-0 left-0 w-full h-full z-5 pointer-events-none" aria-hidden="true"></div>

    <!-- Fireworks Canvas -->
    <canvas id="fireworks-canvas"></canvas>
    
    <!-- Main Container for all scenes -->
    <div class="relative w-full h-screen flex items-center justify-center p-4">
        
        <!-- This div covers the red card with a subtle overlay -->
        <div class="absolute top-0 left-0 w-full h-full bg-black bg-opacity-50 z-0"></div>

        <!-- Scene 1: Initial Greeting -->
        <div id="scene1" class="modal-container text-center bg-white bg-opacity-95 backdrop-blur-sm p-8 rounded-2xl shadow-2xl max-w-md w-full relative overflow-hidden z-10">
            <div class="sparkle-container absolute top-0 left-0 w-full h-full pointer-events-none z-0"></div>
            <div class="relative z-10">
                <h2 class="text-3xl font-festive text-gray-800">Oh, see who is here...</h2>
                <p class="text-4xl font-bold mt-2 text-red-600">The Goddess Herself!</p>
                <button id="kuchBhiBtn" class="mt-8 bg-red-600 text-white font-bold py-3 px-10 rounded-full shadow-lg hover:bg-red-700 transform hover:scale-105 transition-all duration-300">
                    Continue
                </button>
            </div>
        </div>

        <!-- Scene 2: Special Message -->
        <div id="scene2" class="modal-container hidden text-center bg-white bg-opacity-95 backdrop-blur-sm p-8 rounded-2xl shadow-2xl max-w-md w-full relative overflow-hidden z-10">
             <div class="sparkle-container absolute top-0 left-0 w-full h-full pointer-events-none z-0"></div>
             <div class="relative z-10">
                <h2 class="text-4xl font-festive text-green-700">A Special Message!</h2>
                <p class="text-gray-700 mt-4 text-lg">
                   "Someone truly wonderful has a birthday today. I've consulted the stars and they all agree you're at the top of the 'amazing people' list! I've got a little something for you. Wishing you a day as magical as you are!"
                </p>
                <button id="thanksBtn" class="mt-8 bg-green-600 text-white font-bold py-3 px-10 rounded-full shadow-lg hover:bg-green-700 transform hover:scale-105 transition-all duration-300">
                    Okayy....
                </button>
            </div>
        </div>

        <!-- Scene 2.5: Personalized Poem -->
        <div id="scene2_5" class="modal-container hidden text-center bg-white bg-opacity-95 backdrop-blur-sm p-8 rounded-2xl shadow-2xl max-w-lg w-full relative overflow-hidden z-10">
             <div class="sparkle-container absolute top-0 left-0 w-full h-full pointer-events-none z-0"></div>
             <div class="relative z-10">
                <h2 class="text-4xl font-festive text-purple-700">A Poem Just For You</h2>
                <div class="text-gray-700 mt-4 text-left font-poem italic text-lg space-y-2">
                   <p>The stars aligned, a special day,</p>
                   <p>To celebrate you in every way.</p>
                   <p>With a heart of gold and a spirit bright,</p>
                   <p>You fill the world with so much light.</p>
                   <p>May laughter echo, may joy abound,</p>
                   <p>May all the best things be all around.</p>
                </div>
                 <button id="continueBtn" class="mt-8 bg-purple-600 text-white font-bold py-3 px-10 rounded-full shadow-lg hover:bg-purple-700 transform hover:scale-105 transition-all duration-300">
                    Continue
                </button>
            </div>
        </div>
        
        <!-- Scene 2.75: Make a Wish -->
        <div id="scene2_75" class="modal-container hidden text-center bg-white bg-opacity-95 backdrop-blur-sm p-8 rounded-2xl shadow-2xl max-w-md w-full relative overflow-hidden z-10">
            <div class="sparkle-container absolute top-0 left-0 w-full h-full pointer-events-none z-0"></div>
            <div class="relative z-10">
                <h2 class="text-4xl font-festive text-amber-600">Make a Birthday Wish</h2>
                <div class="my-6">
                    <svg width="100" height="150" viewBox="0 0 100 150" class="mx-auto">
                        <defs>
                            <radialGradient id="flameGradient">
                                <stop offset="0%" stop-color="#FFD700" />
                                <stop offset="50%" stop-color="#FFA500" />
                                <stop offset="100%" stop-color="#FF4500" />
                            </radialGradient>
                        </defs>
                        <path class="flame" d="M50 40 C 50 40, 40 20, 50 0 C 60 20, 50 40, 50 40 Z" fill="url(#flameGradient)"/>
                        <line x1="50" y1="40" x2="50" y2="45" stroke="black" stroke-width="2"/>
                        <rect x="40" y="45" width="20" height="105" rx="5" fill="#fefae0"/>
                        <path d="M40 50 C 35 60, 45 65, 40 70" fill="#fefae0" stroke="#e9edc9" stroke-width="1"/>
                    </svg>
                </div>
                <p class="text-gray-600 text-lg italic">Close your eyes, think of something wonderful, and click below when you're ready.</p>
                <button id="wishBtn" class="mt-6 bg-amber-500 text-white font-bold py-3 px-10 rounded-full shadow-lg hover:bg-amber-600 transform hover:scale-105 transition-all duration-300">
                    I've Made My Wish
                </button>
            </div>
        </div>

        <!-- Scene 3: A Final Wish -->
        <div id="scene3" class="modal-container hidden text-center max-w-sm w-full relative z-10">
             <p class="text-center text-white text-2xl font-festive mb-4 drop-shadow-lg">A few words for you...</p>
             <div id="magicGiftImg" class="bg-white bg-opacity-20 backdrop-blur-md p-6 rounded-2xl shadow-lg cursor-pointer transform hover:scale-105 transition-transform duration-500 border border-white/30">
                <p class="font-poem italic text-white text-xl">
                    "May your year be filled with as much joy, light, and magic as you bring to everyone else."
                </p>
                <p class="text-white text-sm mt-4 opacity-70">(Click to see the finale)</p>
             </div>
        </div>
        
        <!-- Scene 4: Final Birthday Reveal -->
        <div id="scene4" class="modal-container hidden text-center max-w-sm w-full relative z-10">
            <img id="finalPhoto" src="unnamed.jpg" alt="Happy Birthday message with confetti" class="rounded-2xl shadow-2xl w-full">
             <p class="mt-6 text-2xl font-festive text-pink-300 drop-shadow-lg animate-pulse">Happy Birthday To You!</p>
<button 
    id="backBtn" 
    class="mt-4 bg-white text-gray-800 font-bold py-3 px-10 rounded-full shadow-lg hover:bg-gray-200 transform hover:scale-105 transition-all duration-300"
    onclick="window.location.href='Main.html'">
    Back
</button>
        </div>

    </div>
    
    <script>
        document.addEventListener('DOMContentLoaded', () => {

            let activeSparkleInterval = null;
            const backgroundMusic = document.getElementById('background-music');

            // --- SNOWFALL EFFECT ---
            const snowContainer = document.getElementById('snow-container');
            const createSnowflake = () => {
                const snowflake = document.createElement('div');
                snowflake.innerHTML = '❄️';
                snowflake.classList.add('snowflake');
                snowflake.style.left = `${Math.random() * 100}vw`;
                snowflake.style.animationDuration = `${Math.random() * 5 + 8}s`; // 8 to 13 seconds
                snowflake.style.opacity = Math.random() * 0.7 + 0.3; // 0.3 to 1.0 opacity
                snowContainer.appendChild(snowflake);
                setTimeout(() => snowflake.remove(), 13000);
            };
            setInterval(createSnowflake, 400);

            // --- SCENE & BUTTON REFERENCES ---
            const scenes = {
                scene1: document.getElementById('scene1'),
                scene2: document.getElementById('scene2'),
                scene2_5: document.getElementById('scene2_5'),
                scene2_75: document.getElementById('scene2_75'),
                scene3: document.getElementById('scene3'),
                scene4: document.getElementById('scene4'),
            };
            const buttons = {
                kuchBhi: document.getElementById('kuchBhiBtn'),
                thanks: document.getElementById('thanksBtn'),
                continue: document.getElementById('continueBtn'),
                wish: document.getElementById('wishBtn'),
                magicGift: document.getElementById('magicGiftImg'),
                back: document.getElementById('backBtn'),
            };

            // --- SCENE TRANSITION LOGIC ---
            function switchScene(current, next) {
                if (activeSparkleInterval) {
                    clearInterval(activeSparkleInterval);
                    const oldContainer = scenes[current]?.querySelector('.sparkle-container');
                    if (oldContainer) oldContainer.innerHTML = '';
                }

                if (scenes[next]) {
                    const newContainer = scenes[next].querySelector('.sparkle-container');
                    if (newContainer) {
                         // Start sparkles for the new scene
                        createSparkle(newContainer); // create first one immediately
                        activeSparkleInterval = setInterval(() => {
                            createSparkle(newContainer);
                        }, 250);
                    }
                }

                if (scenes[current]) scenes[current].classList.add('hidden');
                if (scenes[next]) scenes[next].classList.remove('hidden');

                // Handle black background for fireworks
                if (next === 'scene4') {
                    document.body.classList.add('black-bg');
                } else {
                    document.body.classList.remove('black-bg');
                }
            }

            buttons.kuchBhi.addEventListener('click', () => {
                backgroundMusic.play();
                switchScene('scene1', 'scene2');
            });
            buttons.thanks.addEventListener('click', () => switchScene('scene2', 'scene2_5'));
            buttons.continue.addEventListener('click', () => switchScene('scene2_5', 'scene2_75'));
            buttons.wish.addEventListener('click', () => switchScene('scene2_75', 'scene3'));

            buttons.magicGift.addEventListener('click', () => {
                switchScene('scene3', 'scene4');
                startFireworks(); // Trigger fireworks
            });
            buttons.back.addEventListener('click', () => {
                backgroundMusic.pause();
                backgroundMusic.currentTime = 0;
                switchScene('scene4', 'scene1'); // Go back to the first scene
                stopFireworks(); // Stop fireworks
            });

             // --- SPARKLE EFFECT ---
            function createSparkle(container) {
                if (!container) return;
                const sparkle = document.createElement('div');
                sparkle.classList.add('sparkle');
                
                const size = Math.random() * 3 + 1; // 1px to 4px
                sparkle.style.width = `${size}px`;
                sparkle.style.height = `${size}px`;

                sparkle.style.left = `${Math.random() * 100}%`;
                sparkle.style.animationDuration = `${Math.random() * 3 + 4}s`; // 4 to 7 seconds
                sparkle.style.animationDelay = `${Math.random() * 2}s`;

                container.appendChild(sparkle);

                setTimeout(() => {
                    sparkle.remove();
                }, 7000); 
            }
             // Initial sparkle for the first scene
            const firstContainer = scenes.scene1.querySelector('.sparkle-container');
            if (firstContainer) {
                 activeSparkleInterval = setInterval(() => {
                    createSparkle(firstContainer);
                }, 250);
            }

            // --- FIREWORKS EFFECT ---
            const canvas = document.getElementById('fireworks-canvas');
            const ctx = canvas.getContext('2d');
            let fireworks = [];
            let particles = [];
            let animationFrameId;

            function resizeCanvas() {
                canvas.width = window.innerWidth;
                canvas.height = window.innerHeight;
            }
            resizeCanvas();
            window.addEventListener('resize', resizeCanvas);

            function Firework(sx, sy, tx, ty) {
                this.x = sx; this.y = sy;
                this.sx = sx; this.sy = sy;
                this.tx = tx; this.ty = ty;
                this.distanceToTarget = Math.sqrt(Math.pow(tx - sx, 2) + Math.pow(ty - sy, 2));
                this.distanceTraveled = 0;
                this.coordinates = []; this.coordinateCount = 3;
                while (this.coordinateCount--) { this.coordinates.push([this.x, this.y]); }
                this.angle = Math.atan2(ty - sy, tx - sx);
                this.speed = 2; this.acceleration = 1.05;
                this.brightness = Math.random() * 50 + 50;
                this.targetRadius = 1;
            }

            Firework.prototype.update = function(index) {
                this.coordinates.pop();
                this.coordinates.unshift([this.x, this.y]);
                if (this.targetRadius < 8) { this.targetRadius += 0.3; } else { this.targetRadius = 1; }
                this.speed *= this.acceleration;
                const vx = Math.cos(this.angle) * this.speed;
                const vy = Math.sin(this.angle) * this.speed;
                this.distanceTraveled = Math.sqrt(Math.pow(this.x - this.sx, 2) + Math.pow(this.y - this.sy, 2));
                if (this.distanceTraveled >= this.distanceToTarget) {
                    createParticles(this.tx, this.ty);
                    fireworks.splice(index, 1);
                } else { this.x += vx; this.y += vy; }
            }

            Firework.prototype.draw = function() {
                ctx.beginPath();
                ctx.moveTo(this.coordinates[this.coordinates.length - 1][0], this.coordinates[this.coordinates.length - 1][1]);
                ctx.lineTo(this.x, this.y);
                ctx.strokeStyle = `hsl(${Math.random() * 360}, 100%, ${this.brightness}%)`;
                ctx.stroke();
            }

            function Particle(x, y) {
                this.x = x; this.y = y;
                this.coordinates = []; this.coordinateCount = 5;
                while (this.coordinateCount--) { this.coordinates.push([this.x, this.y]); }
                this.angle = Math.random() * Math.PI * 2;
                this.speed = Math.random() * 15 + 5; // Increased speed for bigger explosion
                this.friction = 0.95; this.gravity = 1.5; // Increased gravity
                this.hue = Math.random() * 360;
                this.brightness = Math.random() * 50 + 50;
                this.alpha = 1; this.decay = Math.random() * 0.03 + 0.015;
            }

            Particle.prototype.update = function(index) {
                this.coordinates.pop();
                this.coordinates.unshift([this.x, this.y]);
                this.speed *= this.friction;
                this.x += Math.cos(this.angle) * this.speed;
                this.y += Math.sin(this.angle) * this.speed + this.gravity;
                this.alpha -= this.decay;
                if (this.alpha <= this.decay) { particles.splice(index, 1); }
            }

            Particle.prototype.draw = function() {
                ctx.beginPath();
                ctx.moveTo(this.coordinates[this.coordinates.length - 1][0], this.coordinates[this.coordinates.length - 1][1]);
                ctx.lineTo(this.x, this.y);
                ctx.strokeStyle = `hsla(${this.hue}, 100%, ${this.brightness}%, ${this.alpha})`;
                ctx.lineWidth = 3; // Thicker particle trails
                ctx.stroke();
            }

            function createParticles(x, y) {
                let particleCount = 250; // Increased particle count for bigger explosions
                while (particleCount--) { particles.push(new Particle(x, y)); }
            }

            function loop() {
                animationFrameId = requestAnimationFrame(loop);
                ctx.globalCompositeOperation = 'destination-out';
                ctx.fillStyle = 'rgba(0, 0, 0, 0.5)';
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                ctx.globalCompositeOperation = 'lighter';

                let i = fireworks.length;
                while (i--) { fireworks[i].draw(); fireworks[i].update(i); }

                let j = particles.length;
                while (j--) { particles[j].draw(); particles[j].update(j); }
            }
            
            let fireworkInterval;

            function startFireworks() {
                if (animationFrameId) return; // Already running
                resizeCanvas();
                loop();
                fireworkInterval = setInterval(() => {
                    if (fireworks.length < 10) { // More rockets for a bigger show
                        const startX = canvas.width / 2;
                        const startY = canvas.height;
                        const targetX = Math.random() * canvas.width * 0.8 + (canvas.width * 0.1); // Avoid edges
                        const targetY = Math.random() * canvas.height / 2;
                        fireworks.push(new Firework(startX, startY, targetX, targetY));
                    }
                }, 400); // Faster rocket launching
            }

            function stopFireworks() {
                cancelAnimationFrame(animationFrameId);
                clearInterval(fireworkInterval);
                animationFrameId = null;
                fireworks = [];
                particles = [];
                ctx.clearRect(0, 0, canvas.width, canvas.height);
            }
        });
    </script>
</body>
</html>


